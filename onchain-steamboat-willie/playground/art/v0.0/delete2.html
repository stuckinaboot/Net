<html>
  <body style="margin: 0">
    <svg id="root" viewBox="0 0 400 400" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
      <rect x="0" y="0" width="100%" height="100%" fill="rgba(0,0,0,1)" />
    </svg>
    <script>
      function random_rgba() {
        return `hsl(${360 * Math.random()},100%,60%)`;
      }
      const images = [
          "PHN2ZwogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICB3aWR0aD0iMTAwJSIKICBoZWlnaHQ9IjEwMCUiCiAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgc3R5bGU9ImJhY2tncm91bmQ6ICMwMDA7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW46IGF1dG8iCj4KICA8Y2lyY2xlIGN4PSIyMDAiIGN5PSIyMDAiIHI9IjE1MCIgc3Ryb2tlPSJyZWQiIHN0cm9rZS13aWR0aD0iMjUiPjwvY2lyY2xlPgo8L3N2Zz4K",
        ],
        CONTENT_INTERVAL = 3,
        j = [
          "ghi",
          "0x7fa9385be102ac3eac297483dd6233d62b3e1496",
          "Topic",
          "def",
          "0x7fa9385be102ac3eac297483dd6233d62b3e1496",
          "Topic",
          "abc",
          "0x7fa9385be102ac3eac297483dd6233d62b3e1496",
          "Topic",
        ];
      const contents = [];
      for (let i = 0; i < 10; i++) {
        for (let i = 0; i < j.length; i++) {
          contents.push(j[i]);
        }
      }
      contents.push(...["FINAL", "0x7fa9385be102ac3eac297483dd6233d62b3e1496", "Topic"]);
      let s = async (t) => new Promise((e) => setTimeout(e, t));
      async function writeText() {
        let t = Array.from(document.getElementsByTagName("text")),
          e = t.map((t) => t.textContent);
        t.forEach((t) => (t.textContent = ""));
        let n = Array.from(document.getElementsByTagName("image"));
        n.forEach((t) => t.setAttributeNS(null, "visibility", "hidden"));
        for (let r = 0; r < t.length; r++) {
          let l = e[r];
          r % 2 == 0 && n[r / 2].setAttributeNS(null, "visibility", "visible");
          for (let a = 0; a <= l.length; a++) (t[r].textContent = l.substring(0, a)), await s(1);
        }
      }
      let SVG_HEIGHT = 400,
        MSGS_TO_SHOW_AT_ONCE = 18,
        START_MSGS_IDX = contents.length - 3 * MSGS_TO_SHOW_AT_ONCE;
      async function addElements() {
        let t = document.getElementById("root"),
          e = 22,
          n = 3,
          r = 18,
          l = SVG_HEIGHT / MSGS_TO_SHOW_AT_ONCE,
          a = 6;
        for (let o = START_MSGS_IDX; o < START_MSGS_IDX + 3 * MSGS_TO_SHOW_AT_ONCE && o < contents.length; o += 3) {
          let S = "pink";
          if (o >= 0) {
            var c = document.createElementNS("http://www.w3.org/2000/svg", "image");
            c.setAttributeNS(null, "height", "300px"),
              c.setAttributeNS(null, "width", "300px"),
              c.setAttributeNS(null, "transform", `translate(2,${n}) scale(0.05)`),
              c.setAttributeNS("http://www.w3.org/1999/xlink", "href", `data:image/svg+xml;base64,${images[0]}`),
              t.append(c);
            var m = document.createElementNS("http://www.w3.org/2000/svg", "line");
            m.setAttribute("x1", "2"),
              m.setAttribute("x2", "400"),
              m.setAttribute("y1", e),
              m.setAttribute("y2", e),
              m.setAttribute("stroke", S),
              m.setAttribute("stroke-width", "0.3px"),
              t.append(m);
            let [$, A, g] = [contents[o], contents[o + 1], contents[o + 2]];
            var T = document.createElementNS("http://www.w3.org/2000/svg", "text");
            T.setAttribute("style", "font-family: monospace; font-size: 6px"),
              T.setAttribute("x", "20"),
              T.setAttribute("y", a),
              T.setAttribute("fill", S),
              (T.textContent = `<name> | ${g} | ${A}`),
              t.append(T);
            var u = document.createElementNS("http://www.w3.org/2000/svg", "text");
            u.setAttribute("style", "font-family: monospace; font-size: 9px"),
              u.setAttribute("x", "20"),
              u.setAttribute("y", r),
              u.setAttribute("fill", S),
              (u.textContent = $),
              t.append(u);
          }
          (e += l), (r += l), (a += l), (n += l);
        }
      }
      function clear(t) {
        Array.from(document.getElementsByTagName(t)).forEach(function (t) {
          t.parentNode.removeChild(t);
        });
      }
      async function removeElements() {
        clear("image"), clear("text"), clear("line");
      }
      async function refresh() {
        await removeElements(), await addElements(), await writeText();
      }
      refresh();
      let cursorPoint = (t) => {
        var e = document.getElementById("root").createSVGPoint();
        return (
          (e.x = t.clientX),
          (e.y = t.clientY),
          e.matrixTransform(document.getElementById("root").getScreenCTM().inverse())
        );
      };
      document.body.addEventListener("click", async (t) => {
        t.target;
        let e = cursorPoint(t);
        console.log(e, document.getElementById("root").getAttribute("height"));
        let n = !1;
        e.y > SVG_HEIGHT / 2
          ? START_MSGS_IDX + MSGS_TO_SHOW_AT_ONCE < contents.length &&
            ((START_MSGS_IDX += MSGS_TO_SHOW_AT_ONCE), (n = !0))
          : START_MSGS_IDX > 0 && ((START_MSGS_IDX -= MSGS_TO_SHOW_AT_ONCE), (n = !0)),
          n && (await refresh());
      });
    </script>
  </body>
</html>
